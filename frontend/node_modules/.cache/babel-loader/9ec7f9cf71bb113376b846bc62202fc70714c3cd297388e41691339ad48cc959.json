{"ast":null,"code":"// src/components/Header.js\nimport'../styles/Header.css';import useState from'react';import React from'react';import{useNavigate}from'react-router-dom';function Header(_ref){let{isLoggedIn,setIsLoggedIn,onHomeClick,onCommunityClick,onMyPageClick,onLoginClick,onSignupClick,onSurveyClick,onRecommendationCourseClick}=_ref;const fallbackImagePath=\"/asset/Images/altImage/alt.png\";// 대체 이미지 경로\nconst navigate=useNavigate();const[isDropdownOpen,setIsDropdownOpen]=React.useState(false);const[profileImagePath,setProfileImagePath]=React.useState(\"\");// const [isLoggedIn, setIsLoggedIn] = React.useState(!!sessionStorage.getItem(\"ID\"));\n// const navigate = useNavigate();\nconst id=sessionStorage.getItem(\"ID\");// 로그인 상태 확인\nReact.useEffect(()=>{console.log(\"Session ID found:\",id);setIsLoggedIn(!!id);},[window.location.pathname]);// URL 변경 시 상태 동기화\n//유저 프로필 요청\nReact.useEffect(()=>{if(id){fetch(`/userProfile/${id}`,{// API 요청\nmethod:'GET',headers:{'Content-Type':'application/json'// 필요시 Authorization 헤더 추가\n// 'Authorization': `Bearer ${sessionStorage.getItem('token')}`\n}}).then(response=>{if(!response.ok){throw new Error('Failed to fetch user data');}return response.json();}).then(data=>{setProfileImagePath(data.profileImagePath);// 사용자 이름 설정\n}).catch(error=>{console.error('Error fetching user data:',error);});}},[id]);const toggleDropdown=()=>{setIsDropdownOpen(!isDropdownOpen);};const closeDropdown=event=>{if(!event.target.closest('.profile-icon')&&isDropdownOpen){setIsDropdownOpen(false);}};const handleLogout=()=>{sessionStorage.removeItem(\"token\");sessionStorage.removeItem(\"ID\");setIsLoggedIn(false);onHomeClick();navigate('/');};React.useEffect(()=>{document.addEventListener('click',closeDropdown);return()=>{document.removeEventListener('click',closeDropdown);};},[isDropdownOpen]);return/*#__PURE__*/React.createElement('header',{className:'header'},/*#__PURE__*/React.createElement('div',{className:'left-group'},/*#__PURE__*/React.createElement('div',{className:'logo',onClick:e=>{e.preventDefault();onHomeClick();navigate('/');}},/*#__PURE__*/React.createElement('img',{src:'/asset/Images/logo/로고.png',alt:'어디갈래 로고'})),/*#__PURE__*/React.createElement('nav',{className:'nav'},/*#__PURE__*/React.createElement('a',{href:'#',onClick:e=>{e.preventDefault();onCommunityClick();navigate('/community');}},'커뮤니티'),isLoggedIn?//로그인 되어 있는 경우\n[/*#__PURE__*/React.createElement('a',{href:'#',onClick:e=>{e.preventDefault();onRecommendationCourseClick();navigate('/recommendation-course');}},'사용자 맞춤 코스 추천')//              React.createElement('a', { href: '#', onClick: (e) => { e.preventDefault(); navigate('/bingo'); },},'빙고 게임')\n]://로그인 안되어 있는 경우\n[/*#__PURE__*/React.createElement('a',{href:'#',onClick:e=>{e.preventDefault();onRecommendationCourseClick();navigate('/login');}},'사용자 맞춤 코스 추천')//              React.createElement('a', { href: '#', onClick: (e) => { e.preventDefault(); navigate('/login'); },},'빙고 게임')\n])),/*#__PURE__*/React.createElement('div',{className:'right-group'},//로그아웃 상태\n!isLoggedIn?[/*#__PURE__*/React.createElement('a',{key:'login',// 고유한 key 추가\nhref:'#',onClick:e=>{e.preventDefault();onLoginClick();navigate('/login');},className:'auth-link'},'로그인'),/*#__PURE__*/React.createElement('a',{key:'signup',// 고유한 key 추가\nhref:'#',onClick:e=>{e.preventDefault();onSignupClick();navigate('/signup');},className:'auth-link'},'회원가입')]//로그인 상태\n:[/*#__PURE__*/React.createElement('a',{key:'logout',// 고유한 key 추가\nhref:'#',onClick:e=>{e.preventDefault();handleLogout();},className:'auth-link'},'로그아웃'),/*#__PURE__*/React.createElement('div',{key:'profile-icon',// 고유한 key 추가\nclassName:'profile-icon',onClick:toggleDropdown},/*#__PURE__*/React.createElement('img',{key:'profile-img',// 고유한 key 추가\nsrc:profileImagePath?`/asset/Images/userProfile/`+profileImagePath:fallbackImagePath,onError:e=>{e.target.src=fallbackImagePath;},// 이미지 로드 실패 시 대체 이미지로 변경\nalt:'No Image'}),isDropdownOpen&&/*#__PURE__*/React.createElement('div',{className:'dropdown-menu',key:'dropdown-menu'},/*#__PURE__*/// 고유한 key 추가\nReact.createElement('a',{key:'mypage',// 고유한 key 추가\nhref:'#',onClick:e=>{e.preventDefault();onMyPageClick();navigate('/mypage');}},'마이페이지'),/*#__PURE__*/React.createElement('a',{key:'settings',// 고유한 key 추가\nhref:'#',onClick:()=>alert('설정 클릭됨')},'설정')))]));}export default Header;","map":{"version":3,"names":["useState","React","useNavigate","Header","_ref","isLoggedIn","setIsLoggedIn","onHomeClick","onCommunityClick","onMyPageClick","onLoginClick","onSignupClick","onSurveyClick","onRecommendationCourseClick","fallbackImagePath","navigate","isDropdownOpen","setIsDropdownOpen","profileImagePath","setProfileImagePath","id","sessionStorage","getItem","useEffect","console","log","window","location","pathname","fetch","method","headers","then","response","ok","Error","json","data","catch","error","toggleDropdown","closeDropdown","event","target","closest","handleLogout","removeItem","document","addEventListener","removeEventListener","createElement","className","onClick","e","preventDefault","src","alt","href","key","onError","alert"],"sources":["C:/Users/hsson/IdeaProjects/2024-2-CSC4004-6-Hotsix/frontend/src/components/Header.js"],"sourcesContent":["// src/components/Header.js\r\nimport '../styles/Header.css'; \r\nimport  useState  from 'react';\r\nimport React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\n\r\nfunction Header({ isLoggedIn, setIsLoggedIn,onHomeClick, onCommunityClick, onMyPageClick, onLoginClick, onSignupClick, onSurveyClick,onRecommendationCourseClick }) {\r\n\r\n  const fallbackImagePath = \"/asset/Images/altImage/alt.png\"; // 대체 이미지 경로\r\n  const navigate = useNavigate();\r\n  const [isDropdownOpen, setIsDropdownOpen] = React.useState(false);\r\n  const [profileImagePath, setProfileImagePath] = React.useState(\"\");\r\n  // const [isLoggedIn, setIsLoggedIn] = React.useState(!!sessionStorage.getItem(\"ID\"));\r\n  // const navigate = useNavigate();\r\n\r\n  const id = sessionStorage.getItem(\"ID\");\r\n  // 로그인 상태 확인\r\n  React.useEffect(() => {\r\n    console.log(\"Session ID found:\", id);\r\n    setIsLoggedIn(!!id);\r\n  }, [window.location.pathname]); // URL 변경 시 상태 동기화\r\n\r\n  //유저 프로필 요청\r\n  React.useEffect(() => {\r\n      if(id){\r\n        fetch(`/userProfile/${id}`, { // API 요청\r\n            method: 'GET',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                // 필요시 Authorization 헤더 추가\r\n                // 'Authorization': `Bearer ${sessionStorage.getItem('token')}`\r\n            },\r\n    } )\r\n        .then(response => {\r\n            if (!response.ok) {\r\n                throw new Error('Failed to fetch user data');\r\n            }\r\n            return response.json();\r\n        })\r\n        .then(data => {\r\n            setProfileImagePath(data.profileImagePath); // 사용자 이름 설정\r\n        })\r\n        .catch(error => {\r\n            console.error('Error fetching user data:', error);\r\n        })\r\n      }\r\n    }, [id]);\r\n\r\n  const toggleDropdown = () => {\r\n    setIsDropdownOpen(!isDropdownOpen);\r\n  };\r\n\r\n\r\n  const closeDropdown = (event) => {\r\n    if (!event.target.closest('.profile-icon') && isDropdownOpen) {\r\n      setIsDropdownOpen(false);\r\n    }\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    sessionStorage.removeItem(\"token\");\r\n    sessionStorage.removeItem(\"ID\");\r\n    setIsLoggedIn(false);\r\n    onHomeClick();\r\n    navigate('/');\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    document.addEventListener('click', closeDropdown);\r\n    return () => {\r\n      document.removeEventListener('click', closeDropdown);\r\n    };\r\n  }, [isDropdownOpen]);\r\n\r\n  return (\r\n    React.createElement('header', { className: 'header' },\r\n      React.createElement('div', { className: 'left-group' },\r\n        React.createElement('div', { className: 'logo', onClick: (e) => { e.preventDefault(); onHomeClick();  navigate('/'); } },\r\n          React.createElement('img', { src: '/asset/Images/logo/로고.png', alt: '어디갈래 로고' })\r\n        ),\r\n        React.createElement('nav', { className: 'nav' },\r\n          React.createElement('a', { href: '#', onClick: (e) => { e.preventDefault(); onCommunityClick(); navigate('/community'); } }, '커뮤니티'),\r\n            isLoggedIn ?\r\n            //로그인 되어 있는 경우\r\n            [\r\n              React.createElement('a', { href: '#', onClick: (e) => { e.preventDefault(); onRecommendationCourseClick();navigate('/recommendation-course'); }}, '사용자 맞춤 코스 추천'),\r\n//              React.createElement('a', { href: '#', onClick: (e) => { e.preventDefault(); navigate('/bingo'); },},'빙고 게임')\r\n            ] : \r\n            //로그인 안되어 있는 경우\r\n            [\r\n              React.createElement('a', { href: '#', onClick: (e) => { e.preventDefault(); onRecommendationCourseClick();navigate('/login'); }}, '사용자 맞춤 코스 추천'),\r\n//              React.createElement('a', { href: '#', onClick: (e) => { e.preventDefault(); navigate('/login'); },},'빙고 게임')\r\n            ]\r\n        ),\r\n      ),\r\n      React.createElement('div', { className: 'right-group' },\r\n\r\n        //로그아웃 상태\r\n        !isLoggedIn ? [\r\n          React.createElement('a', {\r\n              key: 'login', // 고유한 key 추가\r\n              href: '#',\r\n              onClick: (e) => { e.preventDefault(); onLoginClick(); navigate('/login'); },\r\n              className: 'auth-link'\r\n          }, '로그인'),\r\n          React.createElement('a', {\r\n              key: 'signup', // 고유한 key 추가\r\n              href: '#',\r\n              onClick: (e) => { e.preventDefault();onSignupClick();  navigate('/signup'); },\r\n              className: 'auth-link'\r\n          }, '회원가입')\r\n        ] \r\n\r\n        //로그인 상태\r\n        : [\r\n          React.createElement('a', {\r\n              key: 'logout', // 고유한 key 추가\r\n              href: '#',\r\n              onClick: (e) => { e.preventDefault();\r\n              handleLogout();\r\n              },\r\n              className: 'auth-link'\r\n          }, '로그아웃'),\r\n          React.createElement('div', {\r\n              key: 'profile-icon', // 고유한 key 추가\r\n              className: 'profile-icon',\r\n              onClick: toggleDropdown\r\n          },\r\n          React.createElement('img', {\r\n              key: 'profile-img', // 고유한 key 추가\r\n              src: profileImagePath ? `/asset/Images/userProfile/` + profileImagePath : fallbackImagePath,\r\n              onError: (e) => { e.target.src = fallbackImagePath; }, // 이미지 로드 실패 시 대체 이미지로 변경\r\n              alt: 'No Image'\r\n          }),\r\n          isDropdownOpen &&\r\n          React.createElement('div', { className: 'dropdown-menu', key: 'dropdown-menu' }, // 고유한 key 추가\r\n              React.createElement('a', {\r\n                  key: 'mypage', // 고유한 key 추가\r\n                  href: '#',\r\n                  onClick: (e) => { e.preventDefault(); onMyPageClick(); navigate('/mypage');}\r\n                  },\r\n                  '마이페이지'),\r\n              React.createElement('a', {\r\n                  key: 'settings', // 고유한 key 추가\r\n                  href: '#',\r\n                  onClick: () => alert('설정 클릭됨')\r\n              },\r\n                  '설정')\r\n              )\r\n            )\r\n        ]\r\n        )\r\n    )\r\n    );\r\n  }\r\n  \r\n  export default Header;\r\n      "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}